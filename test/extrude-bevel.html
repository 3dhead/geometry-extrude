<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Simple Extrude Example</title>
</head>
<body>
    <style>
        html, body, #main {
            width: 100%;
            height: 100%;
            margin: 0;
            overflow: hidden;
        }
    </style>
    <canvas id="main"></canvas>
    <script src="../dist/polygon-extrude.js"></script>
    <script src="./lib/claygl.js"></script>
    <script>
        const polygons = [
            [
                [
                    [0, 0], [10, 0], [10, 10], [0, 10]
                ].reverse()
            ]
        ];

        clay.application.create('#main', {

            autoRender: false,

            graphic: {
                linear: true,
                tonemapping: true
            },

            init(app) {
                this._camera = app.createCamera([5, 5, 20], [5, 5, 0]);
                const result = polygonExtrude.extrude(polygons, {
                    depth: 2,
                    bevelSize: 0.5
                    // smoothBevel: true
                });

                app.createDirectionalLight([-1, -2, -1], '#aaa');
                // app.scene.add(new clay.light.AmbientSH({
                //     intensity: 0.4,
                //     coefficients: [0.844, 0.712, 0.691, -0.037, 0.083, 0.167, 0.343, 0.288, 0.299, -0.041, -0.021, -0.009, -0.003, -0.041, -0.064, -0.011, -0.007, -0.004, -0.031, 0.034, 0.081, -0.060, -0.049, -0.060, 0.046, 0.056, 0.050]
                // }));
                console.log(result.indices, result.position);

                const geometry = new clay.Geometry();
                geometry.attributes.position.value = result.position;
                geometry.indices = result.indices;
                geometry.generateVertexNormals();
                geometry.generateBarycentric();

                const mesh = app.createMesh(geometry, {});
                mesh.material.set('lineWidth', 1);

                this._control = new clay.plugin.OrbitControl({
                    target: this._camera,
                    domElement: app.container,
                    timeline: app.timeline
                });

                this._control.on('update', function () {
                    app.render();
                });
            },

            loop() {}
        });
    </script>
</body>
</html>